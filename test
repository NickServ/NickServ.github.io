#!/usr/bin/env bash
set -ev

# Build
npm run build

# Validate HTML
java -jar node_modules/vnu-jar/build/dist/vnu.jar --skip-non-html public

# Check links
bundle exec htmlproofer public \
       --check-external-hash \
       --check-favicon \
       --check-html \
       --url-swap '^/apps/(.*)$:http\://nickmccurdy.com/apps/\1'

# Lint styles
node_modules/.bin/stylelint assets/style.scss
