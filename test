#!/usr/bin/env bash
set -e # halt script on error

bundle exec jekyll build
bundle exec jekyll doctor
java -jar node_modules/vnu-jar/build/dist/vnu.jar --skip-non-html _site
bundle exec htmlproofer _site --check-external-hash --check-favicon --check-html \
       --file-ignore _site/projects/index.html,_site/skills/index.html,_site/talks/index.html,/node_modules/ \
       --url-swap '^/apps/(.*)$:http\://nickmccurdy.com/apps/\1'
npx stylelint assets/style.scss
