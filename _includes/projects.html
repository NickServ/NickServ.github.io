{% for pair in site.data.projects %}
  {% assign category = pair[0] %}
  {% assign projects = pair[1] %}

  <section>
    <h2 id="{{ category | slugify }}">{{ category }}</h2>

    {% for project in projects %}
      {% if project.github %}
        {% assign repository = site.github.public_repositories | where: "name", project.github | first %}
        {% assign url = repository.homepage | default: repository.html_url %}
        {% assign name = project.name | default: repository.name %}
        {% assign description = repository.description %}
      {% else %}
        {% if project.speakerdeck %}
          {% assign url = project.speakerdeck | prepend: "https://speakerdeck.com/nickmccurdy/"%}
        {% else  %}
          {% assign url = project.url %}
        {% endif  %}
        {% assign name = project.name %}
        {% assign date = project.date %}
        {% assign description = project.description %}
      {% endif %}

      <article>
        <header>
          <h3>
            <a href="{{ url }}">{{ name }}</a>
          </h3>

          {% if date %}<time datetime="{{ date | date: '%Y-%m-%d' }}">{{ date | date: '%B %-d, %Y' }}</time>{% endif %}
        </header>

        {% if description %}<p>{{ description }}</p>{% endif %}
      </article>
    {% endfor %}
  </section>
{% endfor %}
