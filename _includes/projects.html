{% for pair in site.data.projects %}
  {% assign category = pair[0] %}
  {% assign projects = pair[1] %}

  <section>
    <h2 id="{{ category | slugify }}">{{ category }}</h2>

    {% for project in projects %}
      {% if project.github %}
        {% assign repository = site.github.public_repositories | where: "name", project.github | first %}
        {% assign url = repository.homepage | default: repository.html_url %}
      {% elsif project.speakerdeck %}
        {% assign url = "https://speakerdeck.com/nickmccurdy/" | append: project.speakerdeck %}
      {% else  %}
        {% assign url = project.url %}
      {% endif  %}

      {% assign name = project.name | default: repository.name %}
      {% assign date = project.date %}
      {% assign description = project.description | default: repository.description %}

      <article>
        <header>
          <h3>
            <a href="{{ url }}">{{ name }}</a>
          </h3>

          {% if date %}<time datetime="{{ date | date: '%Y-%m-%d' }}">{{ date | date: '%B %-d, %Y' }}</time>{% endif %}
        </header>

        {% if description %}<p>{{ description }}</p>{% endif %}
      </article>
    {% endfor %}
  </section>
{% endfor %}
